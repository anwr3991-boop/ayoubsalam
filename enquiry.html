<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุงุณุชุนูุงู ุฑูู ุงูููุฏ</title>
  <link rel="stylesheet" href="id.css" />
</head>

<body>

  <div class="wrapper">
    <div class="card">

      <!-- ุดุนุงุฑ ุงูุฌุงูุนุฉ -->
      <div class="logo-box">
        <img src="aiu-logo.png" alt="ุดุนุงุฑ ุงูุฌุงูุนุฉ">
      </div>

      <h2>๐ ุงุณุชุนูุงู ุงูููุงุฏ</h2>
      <p class="subtitle">ุฃุฏุฎู ุฑูู ุงูููุฏ ููุนุฑูุฉ ุงูููุงุฏ ุงููุณุฌูุฉ ููุฐุง ุงููุตู</p>

      <input id="sid" type="number" placeholder="ุฃุฏุฎู ุฑูู ุงูููุฏ">

      <button onclick="lookup()">ุงุณุชุนูุงู</button>

      <p id="error" class="error"></p>

      <div id="result" class="result"></div>
    </div>
  </div>

<script>
  async function lookup() {
    let id = document.getElementById("sid").value;
    let error = document.getElementById("error");
    let box = document.getElementById("result");

    error.textContent = "";
    box.innerHTML = "";

    if (id.trim() === "") {
      error.textContent = "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูู ุงูููุฏ";
      return;
    }

    let api = "https://script.google.com/macros/s/AKfycbwhonFbZB8edfHKfVIvxELQSXT4EfM1790E2hzfv3XveHxms4qCCjcrRBpzd4_RdRKM5w/exec";
    let url = api + "?action=getStudent&id=" + id;

    let res = await fetch(url);
    let data = await res.json();

    if (data.error === "STUDENT_NOT_FOUND") {
      error.textContent = "ุฑูู ุงูููุฏ ุบูุฑ ููุฌูุฏ. ุฑุงุฌุน ููุชุจ ุงูุฏุฑุงุณุฉ.";
      return;
    }

    // ุนุฑุถ ุงูุจูุงูุงุช
    let html = `
      <h3>๐จโ๐ ุงุณู ุงูุทุงูุจ: ${data.full_name}</h3>
      <p>๐๏ธ ุงููููุฉ: ${data.college}</p>
      <p>๐ ุงูุชุฎุตุต: ${data.department}</p>
      <h4>ุงูููุงุฏ ุงููุณุฌูุฉ:</h4>
    `;

    data.courses.forEach(c => {
      html += `
        <div class="course">
          <span class="code">${c.code}</span>
          <span class="name">${c.name}</span>
        </div>`;
    });

    box.innerHTML = html;
  }
</script>

</body>
</html>
