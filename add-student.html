<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ - Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø³Ù„Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Ø®Ø· ÙƒØ§ÙŠØ±Ùˆ -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #003F7C;
      --primary-dark: #021b36;
      --gold: #F4C46A;
      --bg: #020617;
      --card: rgba(15, 23, 42, 0.9);
      --glass: rgba(15, 23, 42, 0.65);
      --border: rgba(148, 163, 184, 0.35);
      --text: #E5F0FF;
      --muted: #9CA3AF;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Cairo", sans-serif;
      background: var(--bg);
      color: var(--text);
      direction: rtl;
      overflow-x: hidden;
    }

    .hero {
      position: relative;
      min-height: 100vh;
      padding: 30px 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #0b1120 0%, #020617 55%, #000 100%);
      overflow: hidden;
    }

    .blob {
      position: absolute;
      width: 420px;
      height: 420px;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.55;
      animation: blobMove 18s infinite alternate ease-in-out;
      z-index: 0;
    }

    .blob1 { background:#1d4ed8; top:-80px; left:-40px; }
    .blob2 { background:#0ea5e9; bottom:-120px; right:-40px; animation-delay:3s; }
    .blob3 { background:#fbbf24; top:50%; right:40%; animation-delay:6s; }

    @keyframes blobMove {
      0%   { transform: translate(0, 0) scale(1); }
      50%  { transform: translate(40px, -30px) scale(1.1); }
      100% { transform: translate(-30px, 40px) scale(0.95); }
    }

    .overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(15,23,42,0.7), rgba(2,6,23,0.96));
      z-index: 1;
    }

    .shell {
      position: relative;
      z-index: 2;
      max-width: 1000px;
      width: 100%;
      display: grid;
      grid-template-columns: 1.3fr 1fr;
      gap: 22px;
    }

    .form-card {
      background: rgba(255,255,255,0.96);
      padding: 22px 24px 20px;
      border-radius: 18px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.35);
      color: #0f172a;
      animation: fadeUp 0.9s ease-out;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    h2 {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 1.6rem;
      color: #012E57;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    h2::before {
      content: "ğŸ‘¨â€ğŸ“";
      font-size: 1.5rem;
      animation: pulse 2.3s infinite;
    }

    @keyframes pulse {
      0%,100% { transform: scale(1); opacity: 1; }
      50%     { transform: scale(1.12); opacity: 0.8; }
    }

    .subtitle {
      margin: 0 0 14px;
      font-size: 0.9rem;
      color: #64748b;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 3px;
      color: #0f172a;
    }

    input,
    select {
      width: 100%;
      padding: 9px 10px;
      border-radius: 8px;
      border: 1px solid #cbd5e1;
      font-size: 0.95rem;
      transition: 0.25s;
      font-family: "Cairo", sans-serif;
    }

    input:focus,
    select:focus {
      border-color: #003F7C;
      box-shadow: 0 0 7px rgba(0,63,124,0.4);
      outline: none;
    }

    select:invalid {
      color: #9ca3af;
    }

    .actions {
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 26px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #F4C46A, #d89a33);
      color: #0f172a;
      font-size: 0.98rem;
      cursor: pointer;
      font-weight: 700;
      transition: 0.25s;
      box-shadow: 0 12px 28px rgba(184,138,56,0.7);
    }

    button:hover {
      background: linear-gradient(135deg, #ffdd8a, #d89a33);
      transform: translateY(-2px);
      box-shadow: 0 16px 36px rgba(184,138,56,0.9);
    }

    .msg {
      margin-top: 10px;
      font-weight: bold;
      font-size: 0.9rem;
      min-height: 1.2rem;
    }

    /* Ù…Ø¤Ø«Ø± "Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨..." */
    .loading {
      display: none;
      margin-top: 6px;
      font-size: 0.85rem;
      color: #0ea5e9;
      font-weight: 600;
    }

    .loading.show {
      display: block;
    }

    /* Ø¥Ø®ÙØ§Ø¡ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø®Ø§Ù… Ø­ØªÙ‰ Ù…Ø§ ÙŠØ·Ù„Ø¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø³ÙˆØ¯ */
    #raw {
      display: none;
    }

    .debug-label {
      margin-top: 6px;
      font-size: 0.75rem;
      color: #64748b;
    }

    .side-card {
      background: var(--glass);
      border-radius: 20px;
      padding: 20px 18px 18px;
      border: 1px solid var(--border);
      box-shadow: 0 18px 55px rgba(15,23,42,0.9);
      backdrop-filter: blur(13px);
      text-align: center;
      animation: fadeUp 1.1s ease-out;
      color: var(--text);
    }

    .logo-wrap {
      width: 115px;
      height: 115px;
      border-radius: 999px;
      border: 2px solid rgba(248,250,252,0.9);
      background: radial-gradient(circle at top, #1d4ed8, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
      box-shadow: 0 0 40px rgba(59,130,246,0.9);
      animation: floatLogo 4.2s ease-in-out infinite;
    }

    .logo-wrap img {
      width: 80px;
      height: auto;
      display: block;
    }

    @keyframes floatLogo {
      0%,100% { transform: translateY(0); }
      50%      { transform: translateY(-10px); }
    }

    .side-title {
      font-size: 1.1rem;
      margin: 4px 0 6px;
      font-weight: 700;
    }

    .side-text {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .bullets {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 6px;
      text-align: right;
      font-size: 0.82rem;
    }

    .bullets span {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34,197,94,0.9);
      animation: blink 1.8s infinite;
    }

    @keyframes blink {
      0%,100% { opacity: 1; }
      50%     { opacity: 0.3; }
    }

    @media (max-width: 880px) {
      .hero {
        padding: 24px 14px;
        align-items: flex-start;
      }

      .shell {
        grid-template-columns: 1fr;
        max-width: 520px;
        margin: 0 auto;
      }

      .side-card {
        order: -1;
        margin-bottom: 10px;
      }
    }

    @media (max-width: 520px) {
      .hero {
        padding: 20px 10px;
      }

      .form-card {
        padding: 18px 14px 18px;
      }

      .row {
        grid-template-columns: 1fr;
      }

      button {
        width: 100%;
        justify-content: center;
        text-align: center;
      }
    }
  </style>
</head>

<body>

<div class="hero">
  <div class="blob blob1"></div>
  <div class="blob blob2"></div>
  <div class="blob blob3"></div>
  <div class="overlay"></div>

  <div class="shell">

    <!-- Ø§Ù„ÙƒØ±Øª Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
    <div class="side-card">
      <div class="logo-wrap">
        <img src="aiu-logo.png" alt="Ø´Ø¹Ø§Ø± Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø³Ù„Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©">
      </div>
      <div class="side-title">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© - Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</div>
      <div class="side-text">
        Ù…Ù† Ø®Ù„Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙŠÙ…ÙƒÙ†Ùƒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¬Ø¯Ø¯ ÙˆØ±Ø¨Ø·Ù‡Ù… Ø¨Ø§Ù„ÙƒÙ„ÙŠØ© ÙˆØ§Ù„ØªØ®ØµØµ
        Ø¶Ù…Ù† Ù…Ù†Ø¸ÙˆÙ…Ø© Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø³Ù„Ø§Ù… Ø§Ù„Ø°ÙƒÙŠØ©.
      </div>

      <div class="bullets">
        <span><span class="dot"></span>ØªØ®Ø²ÙŠÙ† Ø¢Ù…Ù† Ø¯Ø§Ø®Ù„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
        <span><span class="dot"></span>ØªÙƒØ§Ù…Ù„ Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</span>
        <span><span class="dot"></span>ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</span>
      </div>
    </div>

    <!-- ÙƒØ±Øª Ø§Ù„ÙÙˆØ±Ù… -->
    <div class="form-card">
      <h2>Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨</h2>
      <p class="subtitle">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø¯Ù‚Ø©ØŒ Ø«Ù… Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>

      <div class="row">
        <div>
          <label for="sid">Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ¯</label>
          <input type="number" id="sid" placeholder="Ù…Ø«Ø§Ù„: 20251234">
        </div>
        <div>
          <label for="sname">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
          <input type="text" id="sname" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ">
        </div>
      </div>

      <div class="row">
        <div>
          <label for="college">Ø§Ù„ÙƒÙ„ÙŠØ©</label>
          <!-- ØªØªØ¹Ø¨Ù‘Ù‰ Ù…Ù† Ø¬Ø¯ÙˆÙ„ Courses Ø¹Ø¨Ø± getColleges -->
          <select id="college" required>
            <option value="" disabled selected hidden>Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ„ÙŠØ©</option>
          </select>
        </div>
        <div>
          <label for="dep">Ø§Ù„ØªØ®ØµØµ</label>
          <input type="text" id="dep" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„ØµÙŠØ¯Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ±ÙŠØ©">
        </div>
      </div>

      <div class="actions">
        <button onclick="saveStudent()">Ø­ÙØ¸ Ø§Ù„Ø·Ø§Ù„Ø¨</button>
      </div>

      <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
      <div id="loading" class="loading">â³ Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨...</div>

      <p id="msg" class="msg"></p>
      <pre id="raw"></pre>
    </div>

  </div>
</div>

<script>
  // Ù†ÙØ³ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù†ÙØ³Ù‡ ÙÙŠ Ø¨Ù‚ÙŠØ© Ø§Ù„ØµÙØ­Ø§Øª)
  const API_URL = "https://script.google.com/macros/s/AKfycbxSXzoccORX5DP_MwJXg13WPHDBV5vuuh3v0pX8Lch0xYX4tLrF8JjlVpdGpeQLt_7RKA/exec";

  // Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù†Ø­Ù…Ù‘Ù„ Ø§Ù„ÙƒÙ„ÙŠØ§Øª Ù…Ù† Ø¬Ø¯ÙˆÙ„ Courses
  document.addEventListener("DOMContentLoaded", loadColleges);

  async function loadColleges() {
    const select = document.getElementById("college");
    const msg    = document.getElementById("msg");

    try {
      const res  = await fetch(`${API_URL}?action=getColleges`);
      const text = await res.text();
      let data;
      try {
        data = JSON.parse(text);
      } catch (e) {
        console.error("JSON error:", e, text);
        msg.style.color = "red";
        msg.textContent = "Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±.";
        return;
      }

      // Ù†ØªÙˆÙ‚Ø¹: { colleges: ["ÙƒÙ„ÙŠØ© Ø§Ù„ØµÙŠØ¯Ù„Ø©", "ÙƒÙ„ÙŠØ© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨", ...] }
      if (Array.isArray(data.colleges)) {
        while (select.options.length > 1) {
          select.remove(1);
        }
        data.colleges.forEach(col => {
          const opt = document.createElement("option");
          opt.value = col;
          opt.textContent = col;
          select.appendChild(opt);
        });
      } else {
        msg.style.color = "red";
        msg.textContent = "ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„ÙŠØ§ØªØŒ Ø±Ø§Ø¬Ø¹ getColleges ÙÙŠ Code.gs";
      }
    } catch (err) {
      console.error(err);
      msg.style.color = "red";
      msg.textContent = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙ„ÙŠØ§Øª.";
    }
  }

  async function saveStudent() {
    const id      = document.getElementById('sid').value.trim();
    const name    = document.getElementById('sname').value.trim();
    const college = document.getElementById('college').value.trim();
    const dep     = document.getElementById('dep').value.trim();
    const msg     = document.getElementById('msg');
    const raw     = document.getElementById('raw');
    const loading = document.getElementById('loading');

    msg.textContent = "";
    raw.textContent = "";
    loading.classList.remove("show");

    if (!id || !name) {
      msg.style.color = "red";
      msg.textContent = "âš  Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ¯ ÙˆØ§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ø·Ù„ÙˆØ¨Ø§Ù†";
      return;
    }

    const url =
      `${API_URL}?action=addStudent` +
      `&id=${encodeURIComponent(id)}` +
      `&name=${encodeURIComponent(name)}` +
      `&college=${encodeURIComponent(college)}` +
      `&dep=${encodeURIComponent(dep)}`;

    try {
      // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
      loading.classList.add("show");

      const res  = await fetch(url);
      const text = await res.text();
      raw.textContent = text;

      let data;
      try {
        data = JSON.parse(text);
      } catch (e) {
        loading.classList.remove("show");
        msg.style.color = "red";
        msg.textContent = "Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„ÙŠØ³ JSONØŒ Ø±Ø§Ø¬Ø¹ Code.gs Ø£Ùˆ Ø§Ù„Ù†Ø´Ø±.";
        return;
      }

      loading.classList.remove("show");

      if (data.status === "OK") {
        msg.style.color = "green";
        msg.textContent = "âœ” ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­";
        document.getElementById('sid').value     = "";
        document.getElementById('sname').value   = "";
        document.getElementById('college').value = "";
        document.getElementById('dep').value     = "";
      }
      // Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© Ù„ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ø³Ø¨Ù‚Ø§Ù‹
      else if (
        data.status === "STUDENT_EXISTS" ||
        data.status === "STUDENT_EXISIS" ||
        data.status === "EXISTS"
      ) {
        msg.style.color = "red";
        msg.textContent = "âš  Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ¯ Ù‡Ø°Ø§ Ù…Ø³Ø¬Ù‘Ù„ Ù…Ø³Ø¨Ù‚Ù‹Ø§.";
      }
      else if (data.status === "MISSING_FIELDS") {
        msg.style.color = "red";
        msg.textContent = "âš  Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©. ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ¯ ÙˆØ§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨.";
      }
      else {
        msg.style.color = "red";
        msg.textContent = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
      }

    } catch (e) {
      console.error(e);
      loading.classList.remove("show");
      msg.style.color = "red";
      msg.textContent = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API";
    }
  }
</script>

</body>
</html>
